<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>×’×œ×’×œ ××–×œ | ×§×‘×œ×™ ××ª ×”×”×˜×‘×”</title>
<style>
  :root{
    --size: clamp(300px, 88vw, 620px);
    --bg:#0b0b0b; --ink:#fff; --pink:#ff4f87; --white:#fff; --pointer:#000;
    --shadow:0 14px 36px rgba(0,0,0,.35);
  }
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Heebo,Assistant,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{min-height:100svh;display:grid;place-items:center;padding:clamp(10px,4vw,24px)}
  .card{background:#111;border-radius:16px;box-shadow:var(--shadow);padding:clamp(12px,3.5vw,20px);max-width:min(94vw,920px)}
  h1{margin:0 0 6px;font-size:clamp(18px,4.5vw,28px)}
  p.lead{margin:0 0 8px;opacity:.8;font-size:clamp(12px,3.5vw,16px)}
  .wheel-wrap{position:relative;width:var(--size);aspect-ratio:1/1;display:grid;place-items:center;margin-top:6px}
  canvas{width:100%;height:100%;display:block}
  .pointer{position:absolute;top:-8px;left:50%;transform:translateX(-50%);
           width:0;height:0;border-left:clamp(10px,2.8vw,18px) solid transparent;
           border-right:clamp(10px,2.8vw,18px) solid transparent;
           border-bottom:clamp(20px,5vw,34px) solid var(--pointer);
           filter:drop-shadow(0 2px 0 rgba(0,0,0,.45));z-index:6}
  .hub{position:absolute;top:clamp(10px,2.5vw,18px);left:50%;transform:translateX(-50%);
       width:clamp(10px,2.8vw,14px);height:clamp(10px,2.8vw,14px);border-radius:50%;
       background:#fff;border:3px solid var(--pointer);z-index:7}
  .rotor{transition:transform 6.2s cubic-bezier(.12,.11,0,1)}
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:50;padding:clamp(8px,3vw,16px)}
  .modal.show{display:flex}
  .modal .box{background:#1a1a1a;color:#fff;border-radius:14px;box-shadow:0 20px 60px rgba(0,0,0,.5);
              padding:clamp(16px,4.5vw,24px);max-width:min(92vw,520px);text-align:center}
  .title{font-size:clamp(20px,6vw,28px);font-weight:900;margin:0 0 6px}
  .desc{opacity:.95;margin:0 0 10px;font-size:clamp(14px,4vw,18px)}
  .coupon{display:inline-block;margin:6px 0 2px;padding:clamp(8px,2.6vw,10px) clamp(12px,3.6vw,16px);
          border:2px dashed var(--pink);border-radius:12px;font-weight:800;letter-spacing:.5px;
          color:var(--pink);background:#2a2a2a;font-size:clamp(18px,5.5vw,22px)}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>×’×œ×’×œ ×”××–×œ ×©×œ×š ğŸ</h1>
      <p class="lead">×”×’×œ×’×œ ×™×¡×ª×•×‘×‘ ××•×˜×•××˜×™×ª ×•×™×—×©×•×£ ××ª ×”×”×˜×‘×” ×©×œ×š.</p>
      <div class="wheel-wrap">
        <div class="pointer" aria-hidden="true"></div>
        <div class="hub" aria-hidden="true"></div>
        <div id="rotor" class="rotor"><canvas id="wheel" width="760" height="760" aria-label="×’×œ×’×œ ××–×œ"></canvas></div>
      </div>
    </div>
  </div>

  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="mtitle">
    <div class="box">
      <div id="mtitle" class="title">×–×›×™×ª !</div>
      <div id="mdesc" class="desc">×œ××™××•×© ×”×¢×ª×™×§×™ ××ª ×”×§×•×¤×•×Ÿ</div>
      <div id="mcoupon" class="coupon"></div>
    </div>
  </div>

<script>
const CONFIG = {
  wheelSize: 760,
  spins: 6,
  durationSec: 6.2,
  prizes: [
    { label: "20% ×”× ×—×”", coupon: "WIN20", color: "pink" },
    { label: "15% ×”× ×—×”", coupon: "WIN15", color: "white" },
    { label: "50â‚ª ××ª× ×”", coupon: "WIN50", color: "pink" },
    { label: "75â‚ª ××ª× ×”", coupon: "WIN75", color: "white" },
    { label: "10% ×”× ×—×”", coupon: "WIN10", color: "pink" },
    { label: "20% ×”× ×—×”", coupon: "WIN20", color: "white" },
    { label: "15% ×”× ×—×”", coupon: "WIN15", color: "pink" },
    { label: "50â‚ª ××ª× ×”", coupon: "WIN50", color: "white" }
  ]
};

const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const dpr = Math.max(1, window.devicePixelRatio || 1);
canvas.width = CONFIG.wheelSize * dpr;
canvas.height = CONFIG.wheelSize * dpr;
ctx.scale(dpr, dpr);

const size = CONFIG.wheelSize;
const center = size/2;
const radius = size/2 - 14;
const count = CONFIG.prizes.length;
const segAngle = 360 / count;

function drawWheel(){
  ctx.clearRect(0,0,size,size);
  ctx.save(); ctx.translate(center, center);

  for(let i=0;i<count;i++){
    const startDeg = -90 + i*segAngle;
    const endDeg   = startDeg + segAngle;
    const start = startDeg*Math.PI/180, end = endDeg*Math.PI/180;

    ctx.beginPath(); ctx.moveTo(0,0);
    ctx.fillStyle = (CONFIG.prizes[i].color === "white") ? "#ffffff" : "#ff4f87";
    ctx.arc(0,0,radius,start,end,false);
    ctx.closePath(); ctx.fill();

    ctx.beginPath(); ctx.strokeStyle = 'rgba(0,0,0,.35)'; ctx.lineWidth = 2;
    ctx.arc(0,0,radius,start,end,false); ctx.stroke();

    const mid = startDeg + segAngle/2;
    const tx = Math.cos(mid*Math.PI/180)*(radius*0.66);
    const ty = Math.sin(mid*Math.PI/180)*(radius*0.66);
    ctx.save(); ctx.translate(tx,ty); ctx.rotate((mid+90)*Math.PI/180);
    const fontPx = Math.max(22, Math.min(38, window.innerWidth * 0.085));
    ctx.fillStyle = (CONFIG.prizes[i].color === "white") ? "#000" : "#fff";
    ctx.font = `800 ${fontPx}px Heebo, Arial`;
    ctx.textAlign='center'; ctx.textBaseline='middle';
    wrap(ctx, CONFIG.prizes[i].label, 0, 0, radius*0.48, fontPx*1.18);
    ctx.restore();
  }

  // ××¨×›×– ×¢× ×˜×§×¡×˜ "×œ×—×¦×• ×¢×œ×™×™" ××•×’×“×œ + ×”×¦×œ×œ×”
  ctx.beginPath();
  ctx.arc(0,0,radius*0.18,0,Math.PI*2);
  ctx.fillStyle = '#111';
  ctx.fill();
  ctx.lineWidth=4;
  ctx.strokeStyle='#000';
  ctx.stroke();

  ctx.fillStyle = '#fff';
  ctx.shadowColor = 'rgba(255,255,255,0.8)';
  ctx.shadowBlur = 6;
  ctx.font = `bold ${Math.max(34, Math.min(52, window.innerWidth * 0.11))}px Heebo, Arial`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('×œ×—×¦×• ×¢×œ×™×™', 0, 0);
  ctx.shadowBlur = 0;

  ctx.restore();
}

function wrap(ctx, text, x, y, maxW, lh){
  const words = text.split(' '); let line='', lines=[];
  for (let i=0;i<words.length;i++){
    const t = line + words[i] + ' ';
    if (ctx.measureText(t).width > maxW && i>0){ lines.push(line.trim()); line = words[i] + ' '; }
    else line = t;
  }
  lines.push(line.trim()); const total=(lines.length-1)*lh;
  lines.forEach((l,i)=> ctx.fillText(l, x, y - total/2 + i*lh));
}

drawWheel();

const rotor = document.getElementById('rotor');
rotor.style.transitionDuration = CONFIG.durationSec + 's';
let spun = false;

function spin(){
  if(spun) return; spun = true;
  const index = Math.floor(Math.random()*count);
  const centerAngle = -90 + (index + 0.5) * segAngle;
  const full = CONFIG.spins * 360;
  const targetRotation = full - 90 - centerAngle;
  requestAnimationFrame(()=>{ rotor.style.transform = `rotate(${targetRotation}deg)`; });
  rotor.addEventListener('transitionend', ()=>{
    document.getElementById('mcoupon').textContent = CONFIG.prizes[index].coupon;
    document.getElementById('modal').classList.add('show');
  }, { once:true });
}

window.addEventListener('load', ()=>{ setTimeout(spin, 120); }, {once:true});
document.querySelector('.wheel-wrap').addEventListener('click', ()=>{ if(!spun) spin(); }, {passive:true});
window.addEventListener('resize', ()=>{ drawWheel(); }, {passive:true});
</script>
</body>
</html>
